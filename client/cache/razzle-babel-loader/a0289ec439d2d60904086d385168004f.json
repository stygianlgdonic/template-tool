{"ast":null,"code":"var _jsxFileName = \"D:\\\\dev\\\\hyper-engage\\\\web\\\\src\\\\Screens\\\\CreateCardLayout\\\\components\\\\DesignTool\\\\Components\\\\Card\\\\MainCanvas\\\\index.tsx\";\nvar __jsx = React.createElement;\nimport React, { useContext, useEffect, useState } from 'react';\nimport { TemplateContext } from '../../../../../../../contexts/TemplateContext';\nimport WebFont from \"webfontloader\";\nimport MainStage from './MainStage';\n\nconst DesignTool = () => {\n  const {\n    0: variationIndex,\n    1: setVariationIndex\n  } = useState(0);\n  const {\n    0: templateData,\n    1: setTemplateData,\n    2: {\n      goForward,\n      goBack,\n      stepNum\n    }\n  } = useContext(TemplateContext);\n  const {\n    0: selectedId,\n    1: setSelectedId\n  } = useState(null);\n  const {\n    0: isOpenColorPicker,\n    1: setIsOpenColorPicker\n  } = useState(false);\n  const {\n    0: isEditTextBox,\n    1: setIsEditTextBox\n  } = useState(false);\n\n  const unSelectAll = () => {\n    setIsOpenColorPicker(false);\n    setIsEditTextBox(false);\n    setSelectedId(null);\n  };\n\n  const handleEscape = e => {\n    if (e.key === \"Escape\") {\n      unSelectAll();\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener(\"keydown\", handleEscape, false);\n    WebFont.load({\n      google: {\n        families: ['Comfortaa', 'Josefin Sans', 'Euphoria Script', 'Oswald', 'Alfa Slab One', 'Bangers', 'Caveat', 'DM Sans', 'East Sea Dokdo', 'Homemade Apple', 'Kristi', 'Lobster Two', 'Maven Pro', 'Monoton', 'Montserrat', 'Playfair Display', 'Press Start 2P', 'Raleway', 'Roboto Slab', 'Shadows Into Light', 'Swanky and Moo Moo']\n      }\n    });\n    return () => {\n      document.removeEventListener(\"keydown\", handleEscape, false);\n    };\n  }, []);\n\n  const onUndo = () => {\n    !!setSelectedId && unSelectAll();\n    stepNum > 1 && goBack();\n  };\n\n  const onRedo = () => {\n    !!setSelectedId && unSelectAll();\n    stepNum < history.length - 1 && goForward();\n  };\n\n  const handleEditSelectedItem = () => {\n    if ((selectedId === null || selectedId === void 0 ? void 0 : selectedId.split(\"_\")[0]) === \"textBoxes\") {\n      setIsEditTextBox(true);\n      return;\n    }\n\n    setIsOpenColorPicker(true);\n  };\n\n  const handleDeleteSelectedItem = () => {\n    const type = selectedId === null || selectedId === void 0 ? void 0 : selectedId.split(\"_\")[0];\n    setTemplateData(prev => {\n      prev.variations[variationIndex][type] = prev.variations[variationIndex][type].filter(item => item.id !== selectedId);\n      unSelectAll();\n    });\n  };\n\n  const handleCloseEditTextModal = () => {\n    setIsEditTextBox(false);\n  };\n\n  return __jsx(\"div\", {\n    className: \"min-w-max\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"h-20 mb-5 flex flex-wrap justify-center content-center bg-green-800\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    className: \"text-xl text-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }, \"Tempalte Design\")), __jsx(\"div\", {\n    className: \"grid grid-cols-3 gap-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  }, __jsx(\"div\", {\n    className: \"flex justify-center mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  }, __jsx(MainStage, {\n    templateData: templateData,\n    setTemplateData: setTemplateData,\n    variationIndex: variationIndex,\n    selectedId: selectedId,\n    setSelectedId: setSelectedId,\n    unSelectAll: unSelectAll,\n    handleEditSelectedItem: handleEditSelectedItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 25\n    }\n  })))));\n};\n\nexport default DesignTool;","map":{"version":3,"sources":["D:/dev/hyper-engage/web/src/Screens/CreateCardLayout/components/DesignTool/Components/Card/MainCanvas/index.tsx"],"names":["React","useContext","useEffect","useState","TemplateContext","WebFont","MainStage","DesignTool","variationIndex","setVariationIndex","templateData","setTemplateData","goForward","goBack","stepNum","selectedId","setSelectedId","isOpenColorPicker","setIsOpenColorPicker","isEditTextBox","setIsEditTextBox","unSelectAll","handleEscape","e","key","document","addEventListener","load","google","families","removeEventListener","onUndo","onRedo","history","length","handleEditSelectedItem","split","handleDeleteSelectedItem","type","prev","variations","filter","item","id","handleCloseEditTextModal"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { TemplateContext } from '../../../../../../../contexts/TemplateContext';\r\nimport SideBar from './SideBar';\r\nimport WebFont from \"webfontloader\";\r\nimport TopToolBar from './TopToolBar';\r\nimport MainStage from './MainStage';\r\nimport EditingTools from './EditingTools';\r\n\r\nconst DesignTool: React.FC = () => {\r\n\r\n    const [variationIndex, setVariationIndex] = useState<number>(0)\r\n\r\n    const [templateData, setTemplateData, { goForward, goBack, stepNum }] = useContext(TemplateContext)\r\n    const [selectedId, setSelectedId] = useState<string | null>(null);\r\n    const [isOpenColorPicker, setIsOpenColorPicker] = useState<boolean>(false)\r\n    const [isEditTextBox, setIsEditTextBox] = useState(false)\r\n\r\n    const unSelectAll = () => {\r\n        setIsOpenColorPicker(false)\r\n        setIsEditTextBox(false)\r\n        setSelectedId(null)\r\n    }\r\n\r\n    const handleEscape = (e) => {\r\n        if (e.key === \"Escape\") {\r\n            unSelectAll()\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        document.addEventListener(\"keydown\", handleEscape, false);\r\n        WebFont.load({\r\n            google: {\r\n                families: ['Comfortaa', 'Josefin Sans', 'Euphoria Script', 'Oswald', 'Alfa Slab One', 'Bangers', 'Caveat', 'DM Sans', 'East Sea Dokdo', 'Homemade Apple', 'Kristi', 'Lobster Two', 'Maven Pro', 'Monoton', 'Montserrat', 'Playfair Display', 'Press Start 2P', 'Raleway', 'Roboto Slab', 'Shadows Into Light', 'Swanky and Moo Moo']\r\n            }\r\n        });\r\n\r\n        return () => {\r\n            document.removeEventListener(\"keydown\", handleEscape, false);\r\n        };\r\n    }, []);\r\n\r\n    const onUndo = () => {\r\n        !!setSelectedId && unSelectAll();\r\n        stepNum > 1 && goBack();\r\n    };\r\n    const onRedo = () => {\r\n        !!setSelectedId && unSelectAll();\r\n        stepNum < (history.length - 1) && goForward();\r\n    };\r\n\r\n    const handleEditSelectedItem = () => {\r\n        if (selectedId?.split(\"_\")[0] === \"textBoxes\") {\r\n            setIsEditTextBox(true)\r\n            return\r\n        }\r\n        setIsOpenColorPicker(true)\r\n    }\r\n\r\n    const handleDeleteSelectedItem = () => {\r\n        const type = selectedId?.split(\"_\")[0]\r\n        setTemplateData(prev => {\r\n            prev.variations[variationIndex][type] = prev.variations[variationIndex][type].filter(\r\n                item => item.id !== selectedId\r\n            )\r\n            unSelectAll()\r\n        })\r\n    }\r\n\r\n    const handleCloseEditTextModal = () => {\r\n        setIsEditTextBox(false)\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-w-max\">\r\n            <div className=\"h-20 mb-5 flex flex-wrap justify-center content-center bg-green-800\">\r\n                <p className=\"text-xl text-white\">Tempalte Design</p>\r\n            </div>\r\n\r\n            <div className=\"grid grid-cols-3 gap-4\">\r\n\r\n                {/* first col */}\r\n                {/* <SideBar variationIndex={variationIndex} setTemplateData={setTemplateData} /> */}\r\n\r\n                {/* Center column */}\r\n                <div>\r\n                    {/* <TopToolBar\r\n                        onUndo={onUndo}\r\n                        onRedo={onRedo}\r\n                        setTemplateData={setTemplateData}\r\n                        variationIndex={variationIndex}\r\n                        selectedId={selectedId}\r\n                    /> */}\r\n                    <div className=\"flex justify-center mt-5\">\r\n                        <MainStage\r\n                            templateData={templateData}\r\n                            setTemplateData={setTemplateData}\r\n                            variationIndex={variationIndex}\r\n                            selectedId={selectedId}\r\n                            setSelectedId={setSelectedId}\r\n                            unSelectAll={unSelectAll}\r\n                            handleEditSelectedItem={handleEditSelectedItem}\r\n                        />\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                {/* third col */}\r\n                {/* <div className={selectedId ? \"\" : \"hidden\"}>\r\n                    <EditingTools\r\n                        selectedId={selectedId}\r\n                        unSelectAll={unSelectAll}\r\n                        isOpenColorPicker={isOpenColorPicker}\r\n                        isEditTextBox={isEditTextBox}\r\n                        templateData={templateData}\r\n                        setTemplateData={setTemplateData}\r\n                        variationIndex={variationIndex}\r\n                        handleEditSelectedItem={handleEditSelectedItem}\r\n                        handleDeleteSelectedItem={handleDeleteSelectedItem}\r\n                        handleCloseEditTextModal={handleCloseEditTextModal}\r\n                    />\r\n                </div> */}\r\n\r\n            </div>\r\n\r\n\r\n        </div >\r\n    );\r\n};\r\nexport default DesignTool\r\n"]},"metadata":{},"sourceType":"module"}