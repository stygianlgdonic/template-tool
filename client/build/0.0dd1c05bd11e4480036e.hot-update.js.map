{"version":3,"file":"0.0dd1c05bd11e4480036e.hot-update.js","sources":["webpack:///./src/Hooks/CardElementsFunctions/index.tsx"],"sourcesContent":["import * as svg from \"../../utils/svg\"\r\nimport { useFileUpload } from 'use-file-upload'\r\nimport { useContext } from 'react';\r\nimport { DesignToolContext } from '../../contexts/DesignToolContext';\r\nimport { defaultImage, defaultSvg, fontSizeArray } from \"../../utils/defaults\";\r\n\r\nconst CardElementsFunctions = () => {\r\n    const {\r\n        designToolnavigator, setDesignToolnavigator,\r\n        selectedId, setSelectedId,\r\n        cardData, setCardData,\r\n        cardHistory: { goForward, goBack, stepNum, history }\r\n    } = useContext(DesignToolContext)\r\n\r\n    const [file, selectFile] = useFileUpload()\r\n\r\n\r\n    const handleAddNewRect = (rectData: any) => {\r\n        setCardData((prev) => {\r\n            let shapeID = new Date().getTime();\r\n            prev.elements.push({ ...rectData, id: `shapes_${shapeID.toString()}` })\r\n        })\r\n    }\r\n\r\n    const handleAddNewCircle = (circleData: any) => {\r\n        setCardData((prev) => {\r\n            let shapeID = new Date().getTime();\r\n            prev.elements.push({ ...circleData, id: `shapes_${shapeID.toString()}` })\r\n        })\r\n    }\r\n    const handleAddNewTrianlge = (triangleData: any) => {\r\n        setCardData((prev) => {\r\n            let shapeID = new Date().getTime();\r\n            prev.elements.push({ ...triangleData, id: `shapes_${shapeID.toString()}` })\r\n        })\r\n    }\r\n    const handleAddNewPolygon = (polygonData: any) => {\r\n        setCardData((prev) => {\r\n            let shapeID = new Date().getTime();\r\n            prev.elements.push({ ...polygonData, id: `shapes_${shapeID.toString()}` })\r\n        })\r\n    }\r\n\r\n    const handleSvgUpload = (e) => {\r\n        svg.getSvgStringFromUpload(e.target.files).then((SVG_STRING) => {\r\n\r\n            setCardData((prev) => {\r\n                let svgId = new Date().getTime()\r\n                prev.elements.push({\r\n\r\n                    id: `svgs_${svgId.toString()}`,\r\n                    svgString: SVG_STRING,\r\n                    ...defaultSvg\r\n                })\r\n            })\r\n        })\r\n    }\r\n\r\n    const handleImageUpload = () => {\r\n        selectFile({ accept: \"image/png, image/jpg, image/jpeg\", multiple: false },\r\n            ({ file }: any) => {\r\n\r\n                const reader = new FileReader();\r\n                reader.readAsDataURL(file);\r\n\r\n                reader.onload = () => {\r\n                    //base64encoded string\r\n                    setCardData((prev) => {\r\n                        let imageID = new Date().getTime();\r\n                        prev.elements.push({\r\n                            ...defaultImage,\r\n                            src: reader.result,\r\n                            id: `images_${imageID.toString()}`\r\n                        })\r\n                    })\r\n                };\r\n            })\r\n    }\r\n\r\n    const handleAddNewText = (textData: any) => {\r\n        setCardData((prev) => {\r\n            let textID = new Date().getTime();\r\n            prev.elements.push({ ...textData, id: `textBoxes_${textID.toString()}` })\r\n        })\r\n    }\r\n\r\n    const onBringtoFront = () => {\r\n        if (!selectedId) return\r\n        setCardData((prev) => {\r\n            const shapeIndex = prev.elements.findIndex(\r\n                (item) => item.id === selectedId\r\n            );\r\n            if (shapeIndex < (prev.elements.length - 1)) {\r\n\r\n                const temp = prev.elements[shapeIndex]\r\n\r\n                prev.elements[shapeIndex] = prev.elements[shapeIndex + 1]\r\n\r\n                prev.elements[shapeIndex + 1] = temp\r\n\r\n            }\r\n        });\r\n    };\r\n\r\n    const onBringtoBack = () => {\r\n        if (!selectedId) return\r\n        setCardData((prev) => {\r\n            const shapeIndex = prev.elements.findIndex(\r\n                (item) => item.id === selectedId\r\n            );\r\n\r\n            // NOTE - shapeIndex > 1 because index 0 is for background\r\n            if (shapeIndex > 1) {\r\n\r\n                const temp = prev.elements[shapeIndex]\r\n\r\n                prev.elements[shapeIndex] = prev.elements[shapeIndex - 1]\r\n\r\n                prev.elements[shapeIndex - 1] = temp\r\n\r\n            }\r\n        });\r\n    };\r\n\r\n\r\n    const handleDeleteSelectedItem = () => {\r\n        setCardData(prev => {\r\n            prev.elements = prev.elements.filter(\r\n                item => item.id !== selectedId\r\n            )\r\n            setSelectedId(null)\r\n        })\r\n    }\r\n\r\n    const onUndo = () => {\r\n        !!setSelectedId && setSelectedId(null);\r\n        stepNum > 1 && goBack();\r\n    };\r\n    const onRedo = () => {\r\n        !!setSelectedId && setSelectedId(null);\r\n        stepNum < (history.length - 1) && goForward();\r\n    };\r\n\r\n    const handleChangeFontSize = (type: \"Header\" | \"Sub header\" | \"body text\") => {\r\n        setCardData(prev => {\r\n            const shapeIndex = prev.elements.findIndex(\r\n                (item) => item.id === selectedId\r\n            );\r\n            prev.elements[shapeIndex].fontSize = fontSizeArray.find(item => item.name === type).size\r\n        })\r\n    }\r\n\r\n    const handleFontStyle = (type: \"normal\" | \"bold\" | \"italic\") => {\r\n        setCardData(prev => {\r\n            const shapeIndex = prev.elements.findIndex(\r\n                (item) => item.id === selectedId\r\n            );\r\n            prev.elements[shapeIndex].fontSize = fontSizeArray.find(item => item.name === type).size\r\n        })\r\n    }\r\n\r\n    const handleTextTransform = (type: \"uppercase\" | \"lowercase\" | \"capitalize\" | \"none\") => {\r\n        setCardData(prev => {\r\n            const shapeIndex = prev.elements.findIndex(\r\n                (item) => item.id === selectedId\r\n            );\r\n            prev.elements[shapeIndex].textTransform = type\r\n        })\r\n    }\r\n\r\n    const handleTextAlign = (type: \"center\" | \"left\" | \"right\" | \"justify\") => {\r\n        setCardData(prev => {\r\n            const shapeIndex = prev.elements.findIndex(\r\n                (item) => item.id === selectedId\r\n            );\r\n            prev.elements[shapeIndex].textAlign = type\r\n        })\r\n    }\r\n\r\n    const handleTextOpacity = (value: any) => {\r\n        setCardData(prev => {\r\n            const shapeIndex = prev.elements.findIndex(\r\n                (item) => item.id === selectedId\r\n            );\r\n            prev.elements[shapeIndex].opacity = parseFloat(value)\r\n        })\r\n    }\r\n\r\n    const handleTextColor = (color: string) => {\r\n        setCardData(prev => {\r\n            const shapeIndex = prev.elements.findIndex(\r\n                (item) => item.id === selectedId\r\n            );\r\n            prev.elements[shapeIndex].fill = color\r\n        })\r\n    }\r\n\r\n    return {\r\n        handleAddNewRect,\r\n        handleAddNewCircle,\r\n        handleAddNewTrianlge,\r\n        handleAddNewPolygon,\r\n        handleSvgUpload,\r\n        handleImageUpload,\r\n        handleAddNewText,\r\n        handleDeleteSelectedItem,\r\n        handleChangeFontSize,\r\n        onBringtoBack,\r\n        onBringtoFront,\r\n        onUndo,\r\n        onRedo\r\n    }\r\n}\r\n\r\nexport default CardElementsFunctions\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAJA;AAOA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AAHA;AAMA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAHA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;AAEA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAbA;AAeA;AACA;AACA;;;;A","sourceRoot":""}