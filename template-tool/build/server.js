module.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var a=t[r]={i:r,l:!1,exports:{}};return e[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.e=function(){return Promise.resolve()},n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(r,a,function(t){return e[t]}.bind(null,a));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n.oe=function(e){process.nextTick((function(){throw e}))},n(n.s=16)}([function(e,t){e.exports=require("react")},function(e,t,n){"use strict";n.d(t,"j",(function(){return r})),n.d(t,"b",(function(){return a})),n.d(t,"f",(function(){return o})),n.d(t,"d",(function(){return i})),n.d(t,"e",(function(){return l})),n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return c})),n.d(t,"h",(function(){return u})),n.d(t,"g",(function(){return d})),n.d(t,"i",(function(){return f}));const r={width:500,height:600},a={name:"object",x:200,y:250,width:200,height:200,draggable:!0,type:"image"},o={name:"object",colorMap:{},type:"svg",x:100,y:200,width:100,height:100,draggable:!0},i={name:"object",x:150,y:150,width:100,stroke:"#000000",strokeWidth:4,height:100,fill:"#FF0000",draggable:!0,type:"rectangle"},l={name:"object",x:150,y:250,width:100,stroke:"#000000",strokeWidth:4,height:100,cornerRadius:10,fill:"#FF0000",draggable:!0,type:"rectangle"},s={name:"object",x:200,y:100,radius:50,stroke:"#000000",strokeWidth:4,fill:"#FF0000",draggable:!0,type:"circle"},c={name:"object",x:100,y:150,sides:6,stroke:"#000000",strokeWidth:4,radius:70,fill:"#FF0000",type:"polygon"},u={name:"object",x:20,y:200,stroke:"#000000",strokeWidth:4,fill:"#FF0000",points:[0,100,50,0,100,100],tension:0,closed:!0,type:"line"},d={name:"object",text:"New text",x:150,y:200,fontSize:20,draggable:!0,width:200,type:"text"},f=["Montserrat","Comfortaa","Euphoria Script","Josefin Sans","Oswald","Alfa Slab One","Bangers","Caveat","DM Sans","East Sea Dokdo","Homemade Apple","Kristi","Lobster Two","Maven Pro","Monoton","Playfair Display","Raleway","Roboto Slab","Shadows Into Light","Swanky and Moo Moo"]},function(e,t){e.exports=require("react-konva")},function(e,t){e.exports=require("use-image")},function(e,t){e.exports=require("react-color")},function(e,t){e.exports=require("react-router-dom")},function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return u}));var r=n(0),a=n.n(r),o=n(9),i=n(1),l=a.a.createElement;const s={palette:[{name:"primary",color:"#ff0000"},{name:"secondary",color:"#00ff00"},{name:"tertiary",color:"#0000ff"}],variations:[{name:"untitled",face:"",textBoxes:[],images:[],svgs:[],shapes:[{id:"shapes_background",type:"rectangle",x:0,y:0,width:i.j.width,height:i.j.height,fillLinearGradientStartPoint:{x:0,y:0},fillLinearGradientEndPoint:{x:i.j.width,y:i.j.height},fillLinearGradientColorStops:[0,"#F0F0F0",1,"#F0F0F0"],draggable:!1}]}]},c=Object(r.createContext)(null);c.displayName="TemplateContext";const u=({children:e})=>{const[t,n,{goForward:r,goBack:a,stepNum:i,history:u}]=Object(o.useImmerState)(s);return l(c.Provider,{value:[t,n,{goForward:r,goBack:a,stepNum:i,history:u}]},e)}},function(e,t){e.exports=require("express")},function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));const r={select_palette:"/",design_tool:"/tool"}},function(e,t){e.exports=require("@shrugsy/use-immer-state")},function(e,t){e.exports=require("use-file-upload")},function(e,t){e.exports=require("react-dom/server")},function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,a,o=[],i=!0,l=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){l=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(l)throw a}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}e.exports=function(e){var t=r(e,4),n=t[1],a=t[3];if("function"==typeof btoa){var o=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(o),l="/*# ".concat(i," */"),s=a.sources.map((function(e){return"/*# sourceURL=".concat(a.sourceRoot||"").concat(e," */")}));return[n].concat(s).concat([l]).join("\n")}return[n].join("\n")}},function(e,t,n){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n=e(t);return t[2]?"@media ".concat(t[2]," {").concat(n,"}"):n})).join("")},t.i=function(e,n,r){"string"==typeof e&&(e=[[null,e,""]]);var a={};if(r)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(a[i]=!0)}for(var l=0;l<e.length;l++){var s=[].concat(e[l]);r&&a[s[0]]||(n&&(s[2]?s[2]="".concat(n," and ").concat(s[2]):s[2]=n),t.push(s))}},t}},function(e,t){e.exports=require("sweetalert")},function(e,t){e.exports=require("webfontloader")},function(e,t,n){e.exports=n(17)},function(e,t,n){"use strict";n.r(t);var r=n(7),a=n.n(r);let o=n(20).default;const i=parseInt("4000");t.default=a()().use((e,t)=>o.handle(e,t)).listen(i,()=>{console.log("> App started http://localhost:"+i)})},function(e,t,n){"use strict";var r=n(12),a=n.n(r),o=n(13),i=n.n(o)()(a.a);i.push([e.i,"@tailwind base;\n\n@tailwind components;\n\n@tailwind utilities;\n","",{version:3,sources:["webpack://./node_modules/tailwindcss/tailwind.css"],names:[],mappings:"AAAA,cAAc;;AAEd,oBAAoB;;AAEpB,mBAAmB",sourcesContent:["@tailwind base;\n\n@tailwind components;\n\n@tailwind utilities;\n"],sourceRoot:""}])},function(e){e.exports=JSON.parse('{"1":{"js":["/static/js/1.f63cb58f.chunk.js"],"map":["/static/js/1.f63cb58f.chunk.js.map"],"chunks":[1]},"2":{"js":["/static/js/2.edd29502.chunk.js"],"map":["/static/js/2.edd29502.chunk.js.map"],"chunks":[2]},"client":{"css":["/static/css/client.6746daa1.css"],"js":["/static/js/client.db17ab5c.js"],"map":["/static/css/client.6746daa1.css.map","/static/js/client.db17ab5c.js.map"],"chunks":[0]},"noentry":{"ico":["/favicon.ico"],"txt":["/robots.txt","/static/js/1.f63cb58f.chunk.js.LICENSE.txt","/static/js/client.db17ab5c.js.LICENSE.txt"]}}')},function(e,t,n){"use strict";n.r(t),n.d(t,"renderApp",(function(){return v}));var r=n(7),a=n.n(r),o=n(0),i=n.n(o),l=n(11),s=n(5);var c=({children:e})=>{const{0:t,1:n}=Object(o.useState)(!1);return Object(o.useEffect)(()=>{n(!0)},[]),t?e:null},u=n(8),d=n(6),f=(n(18),i.a.createElement);const p=i.a.lazy(()=>Promise.resolve().then(n.bind(null,21))),m=i.a.lazy(()=>Promise.resolve().then(n.bind(null,22)));var g=()=>f(s.Switch,null,f(c,null,f(d.b,null,f(s.Route,{exact:!0,path:u.a.select_palette,render:()=>f(i.a.Suspense,{fallback:f("div",null,"Loading ...")},f(m,null))}),f(s.Route,{exact:!0,path:u.a.design_tool,render:()=>f(i.a.Suspense,{fallback:f("div",null,"Loading ...")},f(p,null))})))),b=i.a.createElement;let h;h=n(19);const v=(e,t)=>{const n={},r=Object(l.renderToString)(b(s.StaticRouter,{context:n,location:e.url},b(g,null)));if(n.url)return{redirect:n.url};return{html:`<!doctype html>\n    <html lang="">\n    <head>\n        <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n        <meta charSet='utf-8' />\n        <title>Welcome to Razzle</title>\n        <meta name="viewport" content="width=device-width, initial-scale=1">\n        ${((e,t)=>e[t]&&e[t].css?e[t].css.map(e=>`<link rel="stylesheet" href="${e}">`).join(""):"")(h,"client")}\n    </head>\n    <body>\n        <div id="root">${r}</div>\n        ${((e,t,n="")=>e[t]&&e[t].js?e[t].js.map(e=>`<script src="${e}"${n}><\/script>`).join(""):"")(h,"client"," defer crossorigin")}\n    </body>\n  </html>`}},y=a()().disable("x-powered-by").use(a.a.static("build\\public")).get("/*",(e,t)=>{const{html:n="",redirect:r=!1}=v(e,t);r?t.redirect(r):t.send(n)});t.default=y},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(6),i=a.a.createElement;var l=({variations:e,variationIndex:t,setVariationIndex:n})=>i("div",{className:"flex"},e.map((e,r)=>i("p",{key:r,className:`${t===r?"text-red-100":"text-red-800"} block px-4 py-2 mr-1 ml-1 text-sm cursor-pointer rounded border border-gray-900 ${t===r?"bg-red-700 hover:bg-red-800":""}`,onClick:()=>n(r),role:"menuitem",tabIndex:-1},e.name))),s=n(9),c=a.a.createElement;var u=({handleSaveVariation:e,templateData:t})=>{const[n,r]=Object(s.useImmerState)({name:"untitled",face:"#FF0000"});return c("div",{className:"fixed z-10 inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},c("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},c("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"}),c("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"â€‹"),c("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},c("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},c("div",{className:""},c("label",null,"Name: "),c("input",{type:"text",placeholder:"Variation name",onChange:e=>r(t=>{t.name=e.target.value})}),c("div",null,"Current face: ",c("div",{className:"w-10 h-10 m-5 border border-black",style:{backgroundColor:n.face}})),c("p",null,"Select face: "),t.palette.map((e,t)=>c("div",{key:t,className:"inline-block"},c("div",{className:"w-10 h-10 m-5 border border-black",style:{backgroundColor:e.color},onClick:()=>r(t=>{t.face=e.color})}))))),c("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},c("button",{onClick:()=>e(n),type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Save")))))},d=n(14),f=n.n(d),p=n(1);function m(e){return(new DOMParser).parseFromString(e,"image/svg+xml")}function g(e){return e.getAttribute("fill")}var b=n(10),h=a.a.createElement;function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=({variationIndex:e,setTemplateData:t})=>{const[n,r]=Object(b.useFileUpload)();return h("div",null,h("div",{className:"flex justify-center"},h("button",{className:"inline-flex items-center h-8 px-4 m-2 text-sm text-green-100 transition-colors duration-150 bg-green-700 rounded-lg focus:shadow-outline hover:bg-green-800",onClick:()=>{t(t=>{let n=(new Date).getTime();t.variations[e].shapes.push(y(y({},p.d),{},{id:"shapes_"+n.toString()}))})}},"Add new Square")),h("div",{className:"flex justify-center"},h("button",{className:"inline-flex items-center h-8 px-4 m-2 text-sm text-green-100 transition-colors duration-150 bg-green-700 rounded-lg focus:shadow-outline hover:bg-green-800",onClick:()=>{t(t=>{let n=(new Date).getTime();t.variations[e].shapes.push(y(y({},p.a),{},{id:"shapes_"+n.toString()}))})}},"Add new Circle")),h("div",{className:"flex justify-center"},h("button",{className:"inline-flex items-center h-8 px-4 m-2 text-sm text-green-100 transition-colors duration-150 bg-green-700 rounded-lg focus:shadow-outline hover:bg-green-800",onClick:()=>{t(t=>{let n=(new Date).getTime();t.variations[e].shapes.push(y(y({},p.h),{},{id:"shapes_"+n.toString()}))})}},"Add new Triangle")),h("div",{className:"flex justify-center"},h("button",{className:"inline-flex items-center h-8 px-4 m-2 text-sm text-green-100 transition-colors duration-150 bg-green-700 rounded-lg focus:shadow-outline hover:bg-green-800",onClick:()=>{t(t=>{let n=(new Date).getTime();t.variations[e].shapes.push(y(y({},p.c),{},{id:"shapes_"+n.toString()}))})}},"Add new Pentagon")),h("div",{className:"flex justify-center"},h("button",{className:"inline-flex items-center h-8 px-4 m-2 text-sm text-green-100 transition-colors duration-150 bg-green-700 rounded-lg focus:shadow-outline hover:bg-green-800",onClick:()=>{t(t=>{let n=(new Date).getTime();t.variations[e].shapes.push(y(y({},p.e),{},{id:"shapes_"+n.toString()}))})}},"Add new Rounded Square")),h("div",{className:"flex justify-center"},h("button",{className:"inline-flex items-center h-8 px-4 m-2 text-sm text-green-100 transition-colors duration-150 bg-green-700 rounded-lg focus:shadow-outline hover:bg-green-800",onClick:()=>{t(t=>{let n=(new Date).getTime();t.variations[e].textBoxes.push(y(y({},p.g),{},{id:"textBoxes_"+n.toString()}))})}},"Add new Text")),h("div",{className:"flex justify-center"},h("p",null,"upload svg"),h("input",{className:"",type:"file",accept:".svg",onChange:n=>{var r;(r=n.target.files,new Promise((e,t)=>{try{var n=new FileReader;n.onload=function(t){var n=t.target.result,r=(new DOMParser).parseFromString(n,"image/svg+xml");e(r.documentElement.outerHTML)},n.readAsText(r[0])}catch(e){t(e)}})).then(n=>{t(t=>{let r=(new Date).getTime();t.variations[e].svgs.push(y({id:"svgs_"+r.toString(),svgString:n},p.f))})})}})),h("div",{className:"flex justify-center"},h("button",{className:"inline-flex items-center h-8 px-4 m-2 text-sm text-green-100 transition-colors duration-150 bg-green-700 rounded-lg focus:shadow-outline hover:bg-green-800",onClick:()=>{r({accept:"image/png, image/jpg, image/jpeg",multiple:!1},({file:n})=>{const r=new FileReader;r.readAsDataURL(n),r.onload=()=>{t(t=>{let n=(new Date).getTime();t.variations[e].images.push(y(y({},p.b),{},{src:r.result,id:"images_"+n.toString()}))})}})}},"Upload image")))},w=n(15),j=n.n(w),S=a.a.createElement;var P=({onUndo:e,onRedo:t,setTemplateData:n,variationIndex:r,selectedId:a})=>S("div",{className:"flex justify-center"},S("div",{className:"flex justify-center"},S("button",{onClick:()=>{a&&n(e=>{const t=e.variations[r][a.split("_")[0]].findIndex(e=>e.id===a);if(t<e.variations[r][a.split("_")[0]].length-1){const n=e.variations[r][a.split("_")[0]][t];e.variations[r][a.split("_")[0]][t]=e.variations[r][a.split("_")[0]][t+1],e.variations[r][a.split("_")[0]][t+1]=n}})},className:"inline-flex items-center h-8 px-4 m-2 text-sm text-green-100 transition-colors duration-150 bg-green-700 rounded-lg focus:shadow-outline hover:bg-green-800"},"Bring to front")),S("div",{className:"flex justify-center"},S("button",{onClick:()=>{a&&n(e=>{const t=e.variations[r][a.split("_")[0]].findIndex(e=>e.id===a);if(t>1){const n=e.variations[r][a.split("_")[0]][t];e.variations[r][a.split("_")[0]][t]=e.variations[r][a.split("_")[0]][t-1],e.variations[r][a.split("_")[0]][t-1]=n}})},className:"inline-flex items-center h-8 px-4 m-2 text-sm text-green-100 transition-colors duration-150 bg-green-700 rounded-lg focus:shadow-outline hover:bg-green-800"},"Bring to Back")),S("div",{className:"flex justify-center"},S("button",{onClick:e,className:"inline-flex items-center h-8 px-4 m-2 text-sm text-green-100 transition-colors duration-150 bg-green-700 rounded-lg focus:shadow-outline hover:bg-green-800"},"Undo")),S("div",{className:"flex justify-center"},S("button",{onClick:t,className:"inline-flex items-center h-8 px-4 m-2 text-sm text-green-100 transition-colors duration-150 bg-green-700 rounded-lg focus:shadow-outline hover:bg-green-800"},"Redo"))),k=n(2),C=n(3),N=n.n(C);const E=["patternImageUrl"];var D=a.a.createElement;function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var R=({shapeProps:e,onSelect:t,onChange:n,onEditClick:o})=>{const i=Object(r.useRef)(null),{patternImageUrl:l}=e,s=F(e,E),[c]=N()(l||null),u=s.width,d=s.height,f=c?c.width:10,p=c?c.height:10,m=s.patternScale||Math.max(u/f,d/p);return D(a.a.Fragment,null,D(k.Rect,I({ref:i,onClick:t,onTap:t,onDblClick:o,onDblTap:o,draggable:!0,strokeScaleEnabled:!1,onTransformEnd:t=>{const r=i.current,a=r.scaleX(),o=r.scaleY();r.scaleX(1),r.scaleY(1),n(M(M({},e),{},{x:r.x(),y:r.y(),width:Math.max(r.width()*a),height:Math.max(r.height()*o)}))},onDragEnd:t=>{n(M(M({},e),{},{x:t.target.x(),y:t.target.y()}))},fillPatternImage:c,fillPatternOffsetX:0,fillPatternOffsetY:0,fillPatternScaleX:m,fillPatternScaleY:m,fillPatternRepeat:"no-repeat"},s)))};const _=["patternImageUrl"];var B=a.a.createElement;function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var z=({shapeProps:e,onSelect:t,onChange:n,onEditClick:o})=>{const i=Object(r.useRef)(null),{patternImageUrl:l}=e,s=Y(e,_),[c]=N()(l||null);return B(a.a.Fragment,null,B(k.Circle,L({ref:i,onClick:t,onTap:t,onDblClick:o,onDblTap:o,draggable:!0,strokeScaleEnabled:!1,onTransformEnd:t=>{n(G(G({},e),{},{scaleX:t.target.attrs.scaleX,scaleY:t.target.attrs.scaleY}))},onDragEnd:t=>{n(G(G({},e),{},{x:t.target.x(),y:t.target.y()}))},fillPatternImage:c,fillPatternOffsetX:0,fillPatternOffsetY:0,fillPatternScaleX:.1,fillPatternScaleY:.1,fillPatternRepeat:"no-repeat"},s)))};const q=["patternImageUrl"];var $=a.a.createElement;function V(){return(V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Q=({shapeProps:e,onSelect:t,onChange:n,onEditClick:o})=>{const i=Object(r.useRef)(null),{patternImageUrl:l}=e,s=K(e,q),[c]=N()(l||null);return $(a.a.Fragment,null,$(k.RegularPolygon,V({ref:i,onClick:t,onTap:t,onDblClick:o,onDblTap:o,draggable:!0,strokeScaleEnabled:!1,onDragEnd:t=>{n(J(J({},e),{},{x:t.target.x(),y:t.target.y()}))},onTransformEnd:t=>{n(J(J({},e),{},{scaleX:t.target.attrs.scaleX,scaleY:t.target.attrs.scaleY}))},fillPatternImage:c,fillPatternOffsetX:0,fillPatternOffsetY:0,fillPatternScaleX:.1,fillPatternScaleY:.1,fillPatternRepeat:"no-repeat"},s)))};const Z=["patternImageUrl"];var ee=a.a.createElement;function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ne(Object(n),!0).forEach((function(t){ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ie=({shapeProps:e,onSelect:t,onChange:n,onEditClick:o})=>{const i=Object(r.useRef)(null),{patternImageUrl:l}=e,s=oe(e,Z),[c]=N()(l||null);return ee(a.a.Fragment,null,ee(k.Line,te({ref:i,onClick:t,onTap:t,onDblClick:o,onDblTap:o,draggable:!0,strokeScaleEnabled:!1,onTransformEnd:t=>{n(re(re({},e),{},{scaleX:t.target.attrs.scaleX,scaleY:t.target.attrs.scaleY}))},onDragEnd:t=>{n(re(re({},e),{},{x:t.target.x(),y:t.target.y()}))},fillPatternImage:c,fillPatternOffsetX:0,fillPatternOffsetY:0,fillPatternScaleX:.1,fillPatternScaleY:.1,fillPatternRepeat:"no-repeat"},s)))},le=a.a.createElement;function se(){return(se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var ce=({svgProps:e,onChange:t,onSelect:n,onEditClick:r})=>{const[o]=N()((i=function(e,t){const n=m(e);var r=n.getElementsByTagName("*");for(const e of r){const n=g(e);t[n]&&e.setAttribute("fill",t[n])}return(new XMLSerializer).serializeToString(n)}(e.svgString,e.colorMap),"data:image/svg+xml;base64,"+window.btoa(unescape(encodeURIComponent(i)))));var i;return le(a.a.Fragment,null,le(k.Image,se({},e,{image:o,onClick:n,onTap:n,onDblClick:r,onDblTap:r,onDragEnd:t,onTransformEnd:t})))},ue=a.a.createElement;function de(){return(de=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var fe=({textProps:e,onChange:t,onSelect:n,onEditClick:a})=>{const o=Object(r.useRef)(null);return ue(k.Text,de({ref:o,draggable:!0,onClick:n,onTap:n,onDblClick:a,onDblTap:a,onTransform:e=>{let t=o.current.scaleX(),n=o.current.width();o.current.setAttrs({width:n*t,scaleX:1,scaleY:1})},onDragEnd:t},e))},pe=a.a.createElement;function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var he=({id:e,selectedShapeName:t,$tr:n})=>{Object(r.useEffect)(()=>{o()},[t]);const o=()=>{const e=n.current.getStage().findOne("#"+t);e?n.current.nodes([e]):n.current.detach(),n.current.getLayer().batchDraw()};return pe(a.a.Fragment,null,pe(k.Transformer,{id:e,ref:n,ignoreStroke:!0,boundBoxFunc:(e,n)=>"shapes_background"===t?e:n.width<50?ge(ge({},e),{},{width:50}):n}))};const ve=["src"];var ye=a.a.createElement;function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Oe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var we=({imageProps:e,onChange:t,onSelect:n})=>{const[r]=N()(e.src),{src:o}=e,i=Oe(e,ve);return ye(a.a.Fragment,null,ye(k.Image,xe({},i,{image:r,onClick:()=>n(e.id),onTap:()=>n(e.id),onDragEnd:t,onTransformEnd:t})))},je=a.a.createElement;function Se(){return(Se=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(n),!0).forEach((function(t){Ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ne=({templateData:e,setTemplateData:t,variationIndex:n,selectedId:o,setSelectedId:i,unSelectAll:l,handleEditSelectedItem:s})=>{var c,u,d,f,m,g,b,h,v,y,x;const O=Object(r.useRef)(null),w=Object(r.useRef)(null),j=Object(r.useRef)(null),S=Object(r.useRef)(null),P=Object(r.useRef)({visible:!1,x1:0,y1:0,x2:0,y2:0}),{0:C,1:N}=Object(r.useState)([]),E=window.Konva,D=()=>{const e=S.current;e.setAttrs({visible:P.current.visible,x:Math.min(P.current.x1,P.current.x2),y:Math.min(P.current.y1,P.current.y2),width:Math.abs(P.current.x1-P.current.x2),height:Math.abs(P.current.y1-P.current.y2),fill:"rgba(0, 161, 255, 0.3)"}),e.getLayer().batchDraw()},I=a.a.useRef(null);return je(k.Stage,Se({ref:O,onMouseDown:e=>{const t=e.target.findAncestor(".elements-container"),n=e.target.findAncestor("Transformer");if(t||n)return;const r=e.target.getStage().getPointerPosition();P.current.visible=!0,P.current.x1=r.x,P.current.y1=r.y,P.current.x2=r.x,P.current.y2=r.y,D()},onMouseUp:()=>{if(I.current=null,!P.current.visible)return;const e=S.current.getClientRect(),t=[];w.current.find(".object").forEach(n=>{const r=n.getClientRect();E.Util.haveIntersection(e,r)&&t.push(n)}),j.current.nodes(t),P.current.visible=!1,E.listenClickTap=!1,D()},onMouseMove:e=>{if(!P.current.visible)return;const t=e.target.getStage().getPointerPosition();P.current.x2=t.x,P.current.y2=t.y,D()},onTouchStart:e=>{e.target===e.target.getStage()&&(l(),j.current.nodes([]),N([]))},onClick:e=>{if(S.current.visible())return;let t=e.target.getStage(),n=w.current,r=j.current;if(e.target===t)return l(),N([]),r.nodes([]),void n.draw();if(!e.target.hasName(".object"))return;const a=e.evt.shiftKey||e.evt.ctrlKey||e.evt.metaKey,o=r.nodes().indexOf(e.target)>=0;if(a||o){if(a&&o){const t=r.nodes().slice();t.splice(t.indexOf(e.target),1),r.nodes(t)}else if(a&&!o){const t=r.nodes().concat([e.target]);r.nodes(t)}}else r.nodes([e.target]);n.draw()}},p.j),je(k.Layer,{ref:w,onDragMove:e=>{const t=w.current.find(".guid-line");t.length&&t.forEach(e=>e.destroy());const n=((e,t)=>{const n=[],r=[];e.vertical.forEach(e=>{t.vertical.forEach(t=>{const r=Math.abs(e-t.guide);r<5&&n.push({lineGuide:e,diff:r,snap:t.snap,offset:t.offset})})}),e.horizontal.forEach(e=>{t.horizontal.forEach(t=>{const n=Math.abs(e-t.guide);n<5&&r.push({lineGuide:e,diff:n,snap:t.snap,offset:t.offset})})});const a=[],o=n.sort((e,t)=>e.diff-t.diff)[0],i=r.sort((e,t)=>e.diff-t.diff)[0];return o&&a.push({lineGuide:o.lineGuide,offset:o.offset,orientation:"V",snap:o.snap}),i&&a.push({lineGuide:i.lineGuide,offset:i.offset,orientation:"H",snap:i.snap}),a})((e=>{const t=[0,p.j.width/2,p.j.width],n=[0,p.j.height/2,p.j.height];return O.current.find(".object").forEach(r=>{if(r===e)return;const a=r.getClientRect();t.push([a.x,a.x+a.width,a.x+a.width/2]),n.push([a.y,a.y+a.height,a.y+a.height/2])}),{vertical:t.flat(),horizontal:n.flat()}})(e.target),(e=>{const t=e.getClientRect();return{vertical:[{guide:Math.round(t.x),offset:Math.round(e.x()-t.x),snap:"start"},{guide:Math.round(t.x+t.width/2),offset:Math.round(e.x()-t.x-t.width/2),snap:"center"},{guide:Math.round(t.x+t.width),offset:Math.round(e.x()-t.x-t.width),snap:"end"}],horizontal:[{guide:Math.round(t.y),offset:Math.round(e.y()-t.y),snap:"start"},{guide:Math.round(t.y+t.height/2),offset:Math.round(e.y()-t.y-t.height/2),snap:"center"},{guide:Math.round(t.y+t.height),offset:Math.round(e.y()-t.y-t.height),snap:"end"}]}})(e.target));n.length&&((e=>{e.forEach(e=>{if("H"===e.orientation){const t=new E.Line({points:[-6e3,e.lineGuide,6e3,e.lineGuide],stroke:"rgb(0, 161, 255)",strokeWidth:1,name:"guid-line",dash:[4,6]});w.current.add(t),w.current.batchDraw()}else if("V"===e.orientation){const t=new E.Line({points:[e.lineGuide,-6e3,e.lineGuide,6e3],stroke:"rgb(0, 161, 255)",strokeWidth:1,name:"guid-line",dash:[4,6]});w.current.add(t),w.current.batchDraw()}})})(n),n.forEach(t=>{switch(t.snap){case"start":case"center":case"end":switch(t.orientation){case"V":e.target.x(t.lineGuide+t.offset);break;case"H":e.target.y(t.lineGuide+t.offset);break;default:return}break;default:return}}))},onDragEnd:e=>{const t=w.current.find(".guid-line");t.length&&t.forEach(e=>e.destroy()),w.current.batchDraw()}},null===(c=e.variations[n].shapes)||void 0===c||null===(u=c.filter(e=>"rectangle"===e.type))||void 0===u?void 0:u.map((e,r)=>je(R,{key:r,shapeProps:e,onSelect:t=>{if(void 0!==t.current){let e=C;C.includes(t.current)||e.push(t.current),N(e),j.current.nodes(C),j.current.nodes(C),j.current.getLayer().batchDraw()}i(e.id)},onEditClick:s,onChange:r=>{t(t=>{const a=t.variations[n].shapes.findIndex(t=>t.id===e.id);t.variations[n].shapes[a]=r})}})),null===(d=e.variations[n].shapes)||void 0===d||null===(f=d.filter(e=>"circle"===e.type))||void 0===f?void 0:f.map((e,r)=>je(z,{key:r,shapeProps:e,onSelect:()=>{i(e.id)},onEditClick:s,onChange:r=>{t(t=>{const a=t.variations[n].shapes.findIndex(t=>t.id===e.id);t.variations[n].shapes[a]=r})}})),null===(m=e.variations[n].shapes)||void 0===m||null===(g=m.filter(e=>"line"===e.type))||void 0===g?void 0:g.map((e,r)=>je(ie,{key:r,shapeProps:e,onSelect:()=>{i(e.id)},onEditClick:s,onChange:r=>{t(t=>{const a=t.variations[n].shapes.findIndex(t=>t.id===e.id);t.variations[n].shapes[a]=r})}})),null===(b=e.variations[n].shapes)||void 0===b||null===(h=b.filter(e=>"polygon"===e.type))||void 0===h?void 0:h.map((e,r)=>je(Q,{key:r,shapeProps:e,onSelect:()=>{i(e.id)},onEditClick:s,onChange:r=>{t(t=>{const a=t.variations[n].shapes.findIndex(t=>t.id===e.id);t.variations[n].shapes[a]=r})}})),null===(v=e.variations[n].svgs)||void 0===v?void 0:v.map((e,r)=>je(ce,{key:r,svgProps:e,onSelect:()=>{i(e.id)},onEditClick:s,onChange:e=>t(t=>{t.variations[n].svgs[r]=ke(ke({},t.variations[n].svgs[r]),JSON.parse(JSON.stringify(e.target.attrs)))})})),null===(y=e.variations[n].images)||void 0===y?void 0:y.map((e,r)=>je(we,{key:r,imageProps:e,onSelect:()=>{i(e.id)},onChange:e=>t(t=>{t.variations[n].images[r]=ke(ke({},t.variations[n].images[r]),JSON.parse(JSON.stringify(e.target.attrs)))})})),null===(x=e.variations[n].textBoxes)||void 0===x?void 0:x.map((e,r)=>je(fe,{key:r,textProps:e,onSelect:()=>{i(e.id)},onEditClick:s,onChange:e=>t(t=>{t.variations[n].textBoxes[r]=ke({},e.target.attrs)})})),je(he,{id:"tr"+o,$tr:j,selectedShapeName:o}),je(k.Rect,{fill:"rgba(0,0,255,0.5)",ref:S})))},Ee=a.a.createElement;var De=({selectedId:e,variationIndex:t,templateData:n,setTemplateData:a,handleCloseEditTextModal:o})=>{const{0:i,1:l}=Object(r.useState)(""),{0:s,1:c}=Object(r.useState)(20),{0:u,1:d}=Object(r.useState)("normal"),{0:f,1:m}=Object(r.useState)(p.i[0]),{0:g,1:b}=Object(r.useState)("left");Object(r.useEffect)(()=>{if("textBoxes"===(null==e?void 0:e.split("_")[0])){const r=n.variations[t].textBoxes.findIndex(t=>t.id===e);l(n.variations[t].textBoxes[r].text),c(n.variations[t].textBoxes[r].fontSize),m(n.variations[t].textBoxes[r].fontFamily),b(n.variations[t].textBoxes[r].align)}},[e]);return Ee("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Ee("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Ee("div",{className:""},Ee("p",null,"Font Size:"),Ee("input",{className:"border mb-5",type:"number",value:s,onChange:e=>c(parseInt(e.target.value))}),Ee("p",null,"Select Font style:"),Ee("select",{className:"border mb-5",name:"font-style",onChange:e=>d(e.target.value)},Ee("option",{value:"normal"},"normal"),Ee("option",{value:"bold"},"bold"),Ee("option",{value:"italic"},"italic"),Ee("option",{value:"italic bold"},"italic bold")),Ee("p",null,"Select Text Alignment:"),Ee("select",{className:"border mb-5",name:"text-align",onChange:e=>b(e.target.value)},Ee("option",{value:"left"},"left"),Ee("option",{value:"center"},"center"),Ee("option",{value:"right"},"right")),Ee("p",null,"Select font family:"),Ee("select",{value:f,style:{fontFamily:f},onChange:e=>m(e.target.value),className:"border mb-5"},p.i.map((e,t)=>Ee("option",{className:"bg-white text-black",style:{fontFamily:e},key:t,selected:e===f,value:e},e)))),Ee("div",{className:""},Ee("textarea",{className:"border h-40 w-full",style:{fontFamily:f,fontSize:s,fontStyle:u,textAlign:g},value:i,onChange:e=>l(e.target.value)}))),Ee("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},Ee("button",{onClick:()=>{a(n=>{const r=n.variations[t].textBoxes.findIndex(t=>t.id===e);n.variations[t].textBoxes[r].text=i,n.variations[t].textBoxes[r].fontSize=s,n.variations[t].textBoxes[r].fontStyle=u,n.variations[t].textBoxes[r].fontFamily=f,n.variations[t].textBoxes[r].align=g}),o()},type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Done")))},Ie=n(4),Te=a.a.createElement;var Me=({selectedId:e,templateData:t,setTemplateData:n,variationIndex:r,currentPalette:a})=>{const[o,i]=Object(b.useFileUpload)(),l=t=>{n(n=>{const a=n.variations[r].shapes.find(t=>t.id===e);a.fill=t,a.patternImageUrl=void 0})},s=(t,a)=>{n(n=>{const o=n.variations[r].shapes.find(t=>t.id===e);o.fill="",o.fillLinearGradientColorStops=[0,t,1,a],o.fillLinearGradientStartPoint={x:0,y:0},o.fillLinearGradientEndPoint={x:"shapes_background"===e?p.j.width:100,y:"shapes_background"===e?p.j.height:100},o.patternImageUrl=void 0})},c=t=>{n(n=>{n.variations[r].shapes.find(t=>t.id===e).fillPatternScaleX=parseFloat(t.target.value)})},u=t=>{n(n=>{n.variations[r].shapes.find(t=>t.id===e).fillPatternScaleY=parseFloat(t.target.value)})},d=t=>{n(n=>{n.variations[r].shapes.find(t=>t.id===e).fillPatternOffsetX=parseFloat(t.target.value)})},f=t=>{n(n=>{n.variations[r].shapes.find(t=>t.id===e).fillPatternOffsetY=parseFloat(t.target.value)})},m=t.variations[r].shapes.find(t=>t.id===e);return Te("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Te("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Te("div",{className:"shapes_background"!==e?"":"hidden"},Te("p",null,"Border width: "),Te("input",{className:"border mb-5",type:"number",min:0,value:null==m?void 0:m.strokeWidth,onChange:t=>{n(n=>{n.variations[r].shapes.find(t=>t.id===e).strokeWidth=parseInt(t.target.value)})}}),Te("p",null,"Corner radius:"),Te("input",{className:"border mb-5",type:"number",min:0,value:null==m?void 0:m.cornerRadius,onChange:t=>{n(n=>{n.variations[r].shapes.find(t=>t.id===e).cornerRadius=parseInt(t.target.value)})}}),Te("p",null,"Opacity: "),Te("input",{className:"border mb-5",type:"number",value:null==m?void 0:m.opacity,step:.1,min:.1,max:1,onChange:t=>{n(n=>{n.variations[r].shapes.find(t=>t.id===e).opacity=parseFloat(t.target.value)})}}),Te("p",null,"Image Scale X: "),Te("input",{className:"border mb-5",type:"number",step:.1,value:null==m?void 0:m.fillPatternScaleX,onChange:c}),Te("p",null,"Image Scale Y: "),Te("input",{className:"border mb-5",type:"number",step:.1,value:null==m?void 0:m.fillPatternScaleY,onChange:u}),Te("p",null,"Image offset X: "),Te("input",{className:"border mb-5",type:"number",step:.1,value:null==m?void 0:m.fillPatternOffsetX,onChange:d}),Te("p",null,"Image offset Y: "),Te("input",{className:"border mb-5",type:"number",step:.1,value:null==m?void 0:m.fillPatternOffsetY,onChange:f}),Te("p",null,"Borer color:"),Te(Ie.SketchPicker,{width:"150px",color:null==m?void 0:m.stroke,onChange:t=>{n(n=>{n.variations[r].shapes.find(t=>t.id===e).stroke=t.hex})}})),Te("div",{className:null!=m&&m.fillPatternImage?"":"hidden"},Te("p",null,"Image Offset X: "),Te("input",{className:"border mb-5",type:"number",value:null==m?void 0:m.fillPatternOffsetX,step:.1,min:.1,max:1,onChange:d}),Te("p",null,"Image Offset Y: "),Te("input",{className:"border mb-5",type:"number",value:null==m?void 0:m.fillPatternOffsetY,step:.1,min:.1,max:1,onChange:f}),Te("p",null,"Image Scale X: "),Te("input",{className:"border mb-5",type:"number",value:null==m?void 0:m.fillPatternScaleX,step:.1,min:.1,max:1,onChange:c}),Te("p",null,"Image Scale Y: "),Te("input",{className:"border mb-5",type:"number",value:null==m?void 0:m.fillPatternScaleY,step:.1,min:.1,max:1,onChange:u})),Te("div",null,a.map((e,t)=>Te("div",{key:t,className:"h-10 mt-5 mb-5 flex flex-wrap justify-center content-center"},Te("p",{className:"w-48"},"Select ",e.name)," ",Te("div",{className:"w-10 h-10 border border-black",style:{backgroundColor:e.color},onClick:()=>l(e.color)})))),Te("div",{className:"sm:flex sm:items-start"},Te(Ie.SketchPicker,{width:"100%",color:null==m?void 0:m.fill,onChange:e=>l(e.hex)}))),Te("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Te("div",{className:"flex justify-center"},Te("button",{className:"inline-flex items-center h-8 px-4 m-2 text-sm text-green-100 transition-colors duration-150 bg-green-700 rounded-lg focus:shadow-outline hover:bg-green-800",onClick:()=>{i({accept:"image/png, image/jpg, image/jpeg",multiple:!1},({file:t})=>{const a=new FileReader;a.readAsDataURL(t),a.onload=()=>{n(t=>{const n=t.variations[r].shapes.find(t=>t.id===e);n.fill="",n.patternImageUrl=a.result})}})}},"Insert image"))),Te("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Te("b",null,"Gradient:"),Te("div",{className:"grid grid-cols-2"},Te("div",null,Te("p",null,"Color 1"),Te("div",{className:"sm:flex sm:items-start"},Te(Ie.SketchPicker,{width:"150px",color:null!=m&&m.fillLinearGradientColorStops?null==m?void 0:m.fillLinearGradientColorStops[1]:"#171717",onChange:e=>s(e.hex,null!=m&&m.fillLinearGradientColorStops?null==m?void 0:m.fillLinearGradientColorStops[3]:"#171717")}))),Te("div",null,Te("p",null,"Color 2"),Te("div",{className:"sm:flex sm:items-start"},Te(Ie.SketchPicker,{width:"150px",color:null!=m&&m.fillLinearGradientColorStops?null==m?void 0:m.fillLinearGradientColorStops[3]:null==m?void 0:m.fill,onChange:e=>s(null!=m&&m.fillLinearGradientColorStops?null==m?void 0:m.fillLinearGradientColorStops[1]:null==m?void 0:m.fill,e.hex)}))))))},Ae=a.a.createElement;var Fe=({selectedId:e,templateData:t,setTemplateData:n,variationIndex:a})=>{const{0:o,1:i}=Object(r.useState)("#171717"),l=t.variations[a].svgs.find(t=>t.id===e),s=function(e){var t=m(e).getElementsByTagName("*");const n=[];for(const e of t){const t=g(e);t&&-1===n.indexOf(t)&&n.push(t)}return n}(l.svgString),c=l.colorMap,u=(t,r)=>{n(n=>{n.variations[a].svgs.find(t=>t.id===e).colorMap[t]=r})};return Ae("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},Ae("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},Ae("div",null,Ae("p",null,"Select a color to edit"),s.map((e,t)=>Ae("div",{key:t,className:"h-10 m-5 inline-block"},Ae("div",{className:"w-10 h-10 border border-black",style:{backgroundColor:l.colorMap[e]||e},onClick:()=>i(e)})))),Ae("div",{className:o?"":"hidden"},t.palette.map((e,t)=>Ae("div",{key:t,className:"h-10 mt-5 mb-5 flex flex-wrap justify-center content-center"},Ae("p",{className:"w-48"},"Select ",e.name)," ",Ae("div",{className:"w-10 h-10 border border-black "+(o===e.color&&"opacity-50"),style:{backgroundColor:e.color},onClick:()=>u(o,e.color)})))),Ae("div",{className:o?"sm:flex sm:items-start":"hidden"},Ae(Ie.SketchPicker,{width:"100%",color:c[o]||"#000000",onChange:e=>u(o,e.hex)}))))},Re=a.a.createElement;var _e=({selectedId:e,unSelectAll:t,isOpenColorPicker:n,isEditTextBox:r,templateData:a,setTemplateData:o,variationIndex:i,handleEditSelectedItem:l,handleDeleteSelectedItem:s,handleCloseEditTextModal:c})=>Re("div",{className:"h-screen overflow-y-scroll"},Re("div",{className:"flex justify-center"},Re("button",{onClick:l,className:"inline-flex items-center h-8 px-4 m-2 text-sm text-green-100 transition-colors duration-150 bg-green-700 rounded-lg focus:shadow-outline hover:bg-green-800"},"Edit")),Re("div",{className:"flex justify-center"},Re("button",{onClick:s,className:"shapes_background"===e?"hidden":"inline-flex items-center h-8 px-4 m-2 text-sm text-green-100 transition-colors duration-150 bg-green-700 rounded-lg focus:shadow-outline hover:bg-green-800"},"Delete")),Re("div",{className:"flex justify-center"},Re("button",{onClick:t,className:"inline-flex items-center h-8 px-4 m-2 text-sm text-green-100 transition-colors duration-150 bg-green-700 rounded-lg focus:shadow-outline hover:bg-green-800"},"Close")),n&&"shapes"===(null==e?void 0:e.split("_")[0])&&Re(Me,{selectedId:e,templateData:a,setTemplateData:o,variationIndex:i,currentPalette:a.palette}),n&&"svgs"===(null==e?void 0:e.split("_")[0])&&Re(Fe,{selectedId:e,templateData:a,setTemplateData:o,variationIndex:i}),r&&Re(De,{selectedId:e,templateData:a,setTemplateData:o,variationIndex:i,handleCloseEditTextModal:c})),Be=a.a.createElement;t.default=()=>{const{0:e,1:t}=Object(r.useState)(0),{0:n,1:a}=Object(r.useState)(!1),{0:i,1:s,2:{goForward:c,goBack:d,stepNum:p}}=Object(r.useContext)(o.a),{0:m,1:g}=Object(r.useState)(null),{0:b,1:h}=Object(r.useState)(!1),{0:v,1:y}=Object(r.useState)(!1);Object(r.useEffect)(()=>{h(!1),y(!1)},[m]);const x=()=>{h(!1),y(!1),g(null)},w=e=>{"Escape"===e.key&&x()};Object(r.useEffect)(()=>(document.addEventListener("keydown",w,!1),j.a.load({google:{families:["Comfortaa","Josefin Sans","Euphoria Script","Oswald","Alfa Slab One","Bangers","Caveat","DM Sans","East Sea Dokdo","Homemade Apple","Kristi","Lobster Two","Maven Pro","Monoton","Montserrat","Playfair Display","Press Start 2P","Raleway","Roboto Slab","Shadows Into Light","Swanky and Moo Moo"]}}),()=>{document.removeEventListener("keydown",w,!1)}),[]);const S=()=>{"textBoxes"!==m.split("_")[0]?h(!0):y(!0)};return Be("div",{className:"min-w-max"},Be("div",{className:"h-20 mb-5 flex flex-wrap justify-center content-center bg-green-800"},Be("p",{className:"text-xl text-white"},"Tempalte Design")),n&&Be(u,{templateData:i,handleSaveVariation:t=>{s(n=>{n.variations[e].name=t.name,n.variations[e].face=t.face}),a(!1)}}),Be("div",{className:"grid grid-cols-3 gap-4"},Be(O,{variationIndex:e,setTemplateData:s}),Be("div",null,Be(P,{onUndo:()=>{g&&x(),p>1&&d()},onRedo:()=>{g&&x(),p<history.length-1&&c()},setTemplateData:s,variationIndex:e,selectedId:m}),Be("div",{className:"flex justify-center mt-5"},Be(Ne,{templateData:i,setTemplateData:s,variationIndex:e,selectedId:m,setSelectedId:g,unSelectAll:x,handleEditSelectedItem:S})),Be("div",{className:"flex justify-center mt-5"},Be(l,{variations:i.variations,variationIndex:e,setVariationIndex:t})),Be("div",{className:"flex justify-center"},Be("button",{className:"inline-flex items-center h-8 px-4 m-2 text-sm text-green-100 transition-colors duration-150 bg-green-700 rounded-lg focus:shadow-outline hover:bg-green-800",onClick:()=>a(!0)},"Save Variation"),Be("button",{className:"inline-flex items-center h-8 px-4 m-2 text-sm text-green-100 transition-colors duration-150 bg-green-700 rounded-lg focus:shadow-outline hover:bg-green-800",onClick:()=>{i.variations.length<3?(s(t=>{t.variations.push(i.variations[e])},!1),t(e=>e+1)):f()("Cannot create more than 3 variations!")}},"Add New Variation"))),Be("div",{className:m?"":"hidden"},Be(_e,{selectedId:m,unSelectAll:x,isOpenColorPicker:b,isEditTextBox:v,templateData:i,setTemplateData:s,variationIndex:e,handleEditSelectedItem:S,handleDeleteSelectedItem:()=>{const t=m.split("_")[0];s(n=>{n.variations[e][t]=n.variations[e][t].filter(e=>e.id!==m),x()})},handleCloseEditTextModal:()=>{y(!1)}}))))}},function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(5),i=n(8),l=n(6),s=n(4),c=a.a.createElement;var u=({currentSelectedColor:e,handleColorChange:t,handleCloseColorPicker:n})=>{const[r,o]=a.a.useState("#000000");a.a.useEffect(()=>{o(e)},[e]);return c("div",{className:"fixed z-10 inset-0 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true"},c("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0"},c("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true"}),c("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true"},"â€‹"),c("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full"},c("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4"},c("div",{className:"sm:flex sm:items-start"},c(s.SketchPicker,{color:r,onChange:e=>o(e.hex)}))),c("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse"},c("button",{onClick:()=>{t(r),n()},type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm"},"Done")))))},d=a.a.createElement;function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t.default=()=>{const{0:e,1:t}=Object(r.useContext)(l.a),{0:n,1:a}=Object(r.useState)(!1),{0:s,1:c}=Object(r.useState)(null);return d("div",null,n&&d(u,{currentSelectedColor:s.color,handleColorChange:e=>{t(t=>{const n=t.palette.findIndex(e=>e.name===(null==s?void 0:s.name));t.palette[n].color=e,c(p(p({},s),{},{color:e}))})},handleCloseColorPicker:()=>{a(!1)}}),d("div",{className:"h-20 flex flex-wrap justify-center content-center bg-green-800"},d("p",{className:"text-xl text-white"},"Select palette for your template")),e.palette.map((e,t)=>d("div",{key:t,className:"h-10 mt-5 mb-5 flex flex-wrap justify-center content-center"},d("p",{className:"w-48"},e.name)," ",d("div",{className:"w-10 h-10 border border-black",style:{backgroundColor:e.color},onClick:()=>{return t=e,a(!0),void c(t);var t}}))),d("div",{className:"flex justify-center"},d(o.NavLink,{className:"inline-flex items-center h-8 px-4 m-2 text-sm text-green-100 transition-colors duration-150 bg-green-700 rounded-lg focus:shadow-outline hover:bg-green-800",to:i.a.design_tool},"Proceed")))}}]);
//# sourceMappingURL=server.js.map