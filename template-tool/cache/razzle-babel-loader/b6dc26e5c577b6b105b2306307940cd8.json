{"ast":null,"code":"var _jsxFileName = \"D:\\\\dev\\\\cardclan-backend\\\\template-tool\\\\src\\\\components\\\\DesignTool\\\\index.tsx\";\nvar __jsx = React.createElement;\nimport React, { useContext, useEffect, useState } from 'react';\nimport { TemplateContext } from '../../contexts/TemplateContext';\nimport SelectVariation from \"../tailwindComponents/SelectVariation\";\nimport SaveVariation from \"../tailwindComponents/SaveVariation\";\nimport swal from \"sweetalert\";\nimport SideBar from './SideBar';\nimport WebFont from \"webfontloader\";\nimport TopToolBar from './TopToolBar';\nimport MainStage from './MainStage';\nimport EditingTools from './EditingTools';\n\nconst DesignTool = () => {\n  const {\n    0: variationIndex,\n    1: setVariationIndex\n  } = useState(0);\n  const {\n    0: showSaveVariationModal,\n    1: setShowSaveVariationModal\n  } = useState(false);\n  const {\n    0: templateData,\n    1: setTemplateData,\n    2: {\n      goForward,\n      goBack,\n      stepNum,\n      history\n    }\n  } = useContext(TemplateContext);\n  const {\n    0: selectedId,\n    1: setSelectedId\n  } = useState(null);\n  const {\n    0: isOpenColorPicker,\n    1: setIsOpenColorPicker\n  } = useState(false);\n  const {\n    0: isEditTextBox,\n    1: setIsEditTextBox\n  } = useState(false);\n  useEffect(() => {\n    setIsOpenColorPicker(false);\n    setIsEditTextBox(false);\n  }, [selectedId]);\n\n  const unSelectAll = () => {\n    setIsOpenColorPicker(false);\n    setIsEditTextBox(false);\n    setSelectedId(null);\n  };\n\n  const handleEscape = e => {\n    if (e.key === \"Escape\") {\n      unSelectAll();\n    }\n  };\n\n  useEffect(() => {\n    document.addEventListener(\"keydown\", handleEscape, false);\n    WebFont.load({\n      google: {\n        families: ['Comfortaa', 'Josefin Sans', 'Euphoria Script', 'Oswald', 'Alfa Slab One', 'Bangers', 'Caveat', 'DM Sans', 'East Sea Dokdo', 'Homemade Apple', 'Kristi', 'Lobster Two', 'Maven Pro', 'Monoton', 'Montserrat', 'Playfair Display', 'Press Start 2P', 'Raleway', 'Roboto Slab', 'Shadows Into Light', 'Swanky and Moo Moo']\n      }\n    });\n    return () => {\n      document.removeEventListener(\"keydown\", handleEscape, false);\n    };\n  }, []);\n\n  const onUndo = () => {\n    console.log({\n      stepNum\n    });\n    !!setSelectedId && unSelectAll();\n    stepNum > 1 && goBack();\n  };\n\n  const onRedo = () => {\n    console.log({\n      stepNum\n    });\n    !!setSelectedId && unSelectAll();\n    stepNum < history.length - 1 && goForward();\n  };\n\n  const handleSaveVariation = variationData => {\n    setTemplateData(prev => {\n      prev.variations[variationIndex].name = variationData.name;\n      prev.variations[variationIndex].face = variationData.face;\n    });\n    setShowSaveVariationModal(false);\n  };\n\n  const handleAddVariation = () => {\n    if (templateData.variations.length < 3) {\n      setTemplateData(prev => {\n        prev.variations.push(templateData.variations[variationIndex]);\n      }, false);\n      setVariationIndex(prev => prev + 1);\n    } else {\n      swal(\"Cannot create more than 3 variations!\");\n    }\n  };\n\n  const handleEditSelectedItem = () => {\n    if (selectedId.split(\"_\")[0] === \"textBoxes\") {\n      setIsEditTextBox(true);\n      return;\n    }\n\n    setIsOpenColorPicker(true);\n  };\n\n  const handleDeleteSelectedItem = () => {\n    const type = selectedId.split(\"_\")[0];\n    setTemplateData(prev => {\n      prev.variations[variationIndex][type] = prev.variations[variationIndex][type].filter(item => item.id !== selectedId);\n      unSelectAll();\n    });\n  };\n\n  const handleCloseEditTextModal = () => {\n    setIsEditTextBox(false);\n  };\n\n  return __jsx(\"div\", {\n    className: \"min-w-max\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"h-20 mb-5 flex flex-wrap justify-center content-center bg-green-800\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }\n  }, __jsx(\"p\", {\n    className: \"text-xl text-white\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }\n  }, \"Tempalte Design\")), showSaveVariationModal && __jsx(SaveVariation, {\n    templateData: templateData,\n    handleSaveVariation: handleSaveVariation,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }), __jsx(\"div\", {\n    className: \"grid grid-cols-3 gap-4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, __jsx(SideBar, {\n    variationIndex: variationIndex,\n    setTemplateData: setTemplateData,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  }, __jsx(TopToolBar, {\n    onUndo: onUndo,\n    onRedo: onRedo,\n    setTemplateData: setTemplateData,\n    variationIndex: variationIndex,\n    selectedId: selectedId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 21\n    }\n  }), __jsx(\"div\", {\n    className: \"flex justify-center mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 21\n    }\n  }, __jsx(MainStage, {\n    templateData: templateData,\n    setTemplateData: setTemplateData,\n    variationIndex: variationIndex,\n    selectedId: selectedId,\n    setSelectedId: setSelectedId,\n    unSelectAll: unSelectAll,\n    handleEditSelectedItem: handleEditSelectedItem,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 25\n    }\n  })), __jsx(\"div\", {\n    className: \"flex justify-center mt-5\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 21\n    }\n  }, __jsx(SelectVariation, {\n    variations: templateData.variations,\n    variationIndex: variationIndex,\n    setVariationIndex: setVariationIndex,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 25\n    }\n  })), __jsx(\"div\", {\n    className: \"flex justify-center\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 21\n    }\n  }, __jsx(\"button\", {\n    className: \"inline-flex items-center h-8 px-4 m-2 text-sm text-green-100 transition-colors duration-150 bg-green-700 rounded-lg focus:shadow-outline hover:bg-green-800\",\n    onClick: () => setShowSaveVariationModal(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 25\n    }\n  }, \"Save Variation\"), __jsx(\"button\", {\n    className: \"inline-flex items-center h-8 px-4 m-2 text-sm text-green-100 transition-colors duration-150 bg-green-700 rounded-lg focus:shadow-outline hover:bg-green-800\",\n    onClick: handleAddVariation,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 25\n    }\n  }, \"Add New Variation\"))), __jsx(\"div\", {\n    className: selectedId ? \"\" : \"hidden\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  }, __jsx(EditingTools, {\n    selectedId: selectedId,\n    unSelectAll: unSelectAll,\n    isOpenColorPicker: isOpenColorPicker,\n    isEditTextBox: isEditTextBox,\n    templateData: templateData,\n    setTemplateData: setTemplateData,\n    variationIndex: variationIndex,\n    handleEditSelectedItem: handleEditSelectedItem,\n    handleDeleteSelectedItem: handleDeleteSelectedItem,\n    handleCloseEditTextModal: handleCloseEditTextModal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 21\n    }\n  }))));\n};\n\nexport default DesignTool;","map":{"version":3,"sources":["D:/dev/cardclan-backend/template-tool/src/components/DesignTool/index.tsx"],"names":["React","useContext","useEffect","useState","TemplateContext","SelectVariation","SaveVariation","swal","SideBar","WebFont","TopToolBar","MainStage","EditingTools","DesignTool","variationIndex","setVariationIndex","showSaveVariationModal","setShowSaveVariationModal","templateData","setTemplateData","goForward","goBack","stepNum","history","selectedId","setSelectedId","isOpenColorPicker","setIsOpenColorPicker","isEditTextBox","setIsEditTextBox","unSelectAll","handleEscape","e","key","document","addEventListener","load","google","families","removeEventListener","onUndo","console","log","onRedo","length","handleSaveVariation","variationData","prev","variations","name","face","handleAddVariation","push","handleEditSelectedItem","split","handleDeleteSelectedItem","type","filter","item","id","handleCloseEditTextModal"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { TemplateContext } from '../../contexts/TemplateContext';\r\nimport SelectVariation from \"../tailwindComponents/SelectVariation\"\r\nimport SaveVariation from \"../tailwindComponents/SaveVariation\"\r\nimport swal from \"sweetalert\"\r\nimport SideBar from './SideBar';\r\nimport WebFont from \"webfontloader\";\r\nimport TopToolBar from './TopToolBar';\r\nimport MainStage from './MainStage';\r\nimport EditingTools from './EditingTools';\r\n\r\nconst DesignTool: React.FC = () => {\r\n\r\n    const [variationIndex, setVariationIndex] = useState<number>(0)\r\n\r\n    const [showSaveVariationModal, setShowSaveVariationModal] = useState(false)\r\n\r\n    const [templateData, setTemplateData, { goForward, goBack, stepNum, history }] = useContext(TemplateContext)\r\n    const [selectedId, setSelectedId] = useState<string | null>(null);\r\n    const [isOpenColorPicker, setIsOpenColorPicker] = useState<boolean>(false)\r\n    const [isEditTextBox, setIsEditTextBox] = useState(false)\r\n\r\n    useEffect(() => {\r\n        setIsOpenColorPicker(false)\r\n        setIsEditTextBox(false)\r\n    }, [selectedId])\r\n\r\n    const unSelectAll = () => {\r\n        setIsOpenColorPicker(false)\r\n        setIsEditTextBox(false)\r\n        setSelectedId(null)\r\n    }\r\n\r\n    const handleEscape = (e) => {\r\n        if (e.key === \"Escape\") {\r\n            unSelectAll()\r\n        }\r\n    }\r\n\r\n    useEffect(() => {\r\n        document.addEventListener(\"keydown\", handleEscape, false);\r\n        WebFont.load({\r\n            google: {\r\n                families: ['Comfortaa', 'Josefin Sans', 'Euphoria Script', 'Oswald', 'Alfa Slab One', 'Bangers', 'Caveat', 'DM Sans', 'East Sea Dokdo', 'Homemade Apple', 'Kristi', 'Lobster Two', 'Maven Pro', 'Monoton', 'Montserrat', 'Playfair Display', 'Press Start 2P', 'Raleway', 'Roboto Slab', 'Shadows Into Light', 'Swanky and Moo Moo']\r\n            }\r\n        });\r\n\r\n        return () => {\r\n            document.removeEventListener(\"keydown\", handleEscape, false);\r\n        };\r\n    }, []);\r\n\r\n    const onUndo = () => {\r\n        console.log({ stepNum })\r\n        !!setSelectedId && unSelectAll();\r\n        stepNum > 1 && goBack();\r\n    };\r\n    const onRedo = () => {\r\n        console.log({ stepNum })\r\n        !!setSelectedId && unSelectAll();\r\n        stepNum < (history.length - 1) && goForward();\r\n    };\r\n\r\n    const handleSaveVariation = (variationData: any) => {\r\n        setTemplateData(prev => {\r\n            prev.variations[variationIndex].name = variationData.name\r\n            prev.variations[variationIndex].face = variationData.face\r\n        })\r\n        setShowSaveVariationModal(false)\r\n    }\r\n\r\n    const handleAddVariation = () => {\r\n        if (templateData.variations.length < 3) {\r\n            setTemplateData(prev => {\r\n                prev.variations.push(templateData.variations[variationIndex])\r\n            }, false)\r\n            setVariationIndex(prev => (prev + 1))\r\n        } else {\r\n            swal(\"Cannot create more than 3 variations!\")\r\n        }\r\n    }\r\n\r\n    const handleEditSelectedItem = () => {\r\n        if (selectedId.split(\"_\")[0] === \"textBoxes\") {\r\n            setIsEditTextBox(true)\r\n            return\r\n        }\r\n        setIsOpenColorPicker(true)\r\n    }\r\n\r\n    const handleDeleteSelectedItem = () => {\r\n        const type = selectedId.split(\"_\")[0]\r\n        setTemplateData(prev => {\r\n            prev.variations[variationIndex][type] = prev.variations[variationIndex][type].filter(\r\n                item => item.id !== selectedId\r\n            )\r\n            unSelectAll()\r\n        })\r\n    }\r\n\r\n    const handleCloseEditTextModal = () => {\r\n        setIsEditTextBox(false)\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-w-max\">\r\n            <div className=\"h-20 mb-5 flex flex-wrap justify-center content-center bg-green-800\">\r\n                <p className=\"text-xl text-white\">Tempalte Design</p>\r\n            </div>\r\n\r\n            {showSaveVariationModal && (\r\n                <SaveVariation\r\n                    templateData={templateData}\r\n                    handleSaveVariation={handleSaveVariation}\r\n                />\r\n            )}\r\n\r\n            <div className=\"grid grid-cols-3 gap-4\">\r\n\r\n                {/* first col */}\r\n                <SideBar variationIndex={variationIndex} setTemplateData={setTemplateData} />\r\n\r\n                {/* Center column */}\r\n                <div>\r\n                    <TopToolBar\r\n                        onUndo={onUndo}\r\n                        onRedo={onRedo}\r\n                        setTemplateData={setTemplateData}\r\n                        variationIndex={variationIndex}\r\n                        selectedId={selectedId}\r\n                    />\r\n                    <div className=\"flex justify-center mt-5\">\r\n                        <MainStage\r\n                            templateData={templateData}\r\n                            setTemplateData={setTemplateData}\r\n                            variationIndex={variationIndex}\r\n                            selectedId={selectedId}\r\n                            setSelectedId={setSelectedId}\r\n                            unSelectAll={unSelectAll}\r\n                            handleEditSelectedItem={handleEditSelectedItem}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"flex justify-center mt-5\">\r\n                        <SelectVariation\r\n                            variations={templateData.variations}\r\n                            variationIndex={variationIndex}\r\n                            setVariationIndex={setVariationIndex}\r\n                        />\r\n                    </div>\r\n\r\n                    <div className=\"flex justify-center\">\r\n                        <button\r\n                            className=\"inline-flex items-center h-8 px-4 m-2 text-sm text-green-100 transition-colors duration-150 bg-green-700 rounded-lg focus:shadow-outline hover:bg-green-800\"\r\n                            onClick={() => setShowSaveVariationModal(true)}\r\n                        >Save Variation</button>\r\n                        <button\r\n                            className=\"inline-flex items-center h-8 px-4 m-2 text-sm text-green-100 transition-colors duration-150 bg-green-700 rounded-lg focus:shadow-outline hover:bg-green-800\"\r\n                            onClick={handleAddVariation}\r\n                        >Add New Variation</button>\r\n                    </div>\r\n                </div>\r\n\r\n                {/* third col */}\r\n                <div className={selectedId ? \"\" : \"hidden\"}>\r\n                    <EditingTools\r\n                        selectedId={selectedId}\r\n                        unSelectAll={unSelectAll}\r\n                        isOpenColorPicker={isOpenColorPicker}\r\n                        isEditTextBox={isEditTextBox}\r\n                        templateData={templateData}\r\n                        setTemplateData={setTemplateData}\r\n                        variationIndex={variationIndex}\r\n                        handleEditSelectedItem={handleEditSelectedItem}\r\n                        handleDeleteSelectedItem={handleDeleteSelectedItem}\r\n                        handleCloseEditTextModal={handleCloseEditTextModal}\r\n                    />\r\n                </div>\r\n\r\n            </div>\r\n\r\n\r\n        </div >\r\n    );\r\n};\r\nexport default DesignTool\r\n"]},"metadata":{},"sourceType":"module"}